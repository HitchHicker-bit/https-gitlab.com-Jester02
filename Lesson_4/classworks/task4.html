<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Form work1</title>
  <script>
    /*
      Задание:

      1. Сгенерировать список стран в Select countries
      2. При выборе страны генерировать еще один Select со списком
        городов этой страны и вывести этот селект в блок result
      3. При выборе города нужно случайно рандомить температуру от
      -10 градусов до +40. Если температура

        -10 до 0 то 'Солнечно' 'Легкий снегопад' 'Сильный снегопад'
        0 до 30 то  'Солнечно' 'Дождь' 'Ветер' 'Сильный дождь'
        30 до 40 то 'Солнечно' 'Засуха' 'Ветер'

      4. Вывести сообщение на страничку
        {Country}. В {City} {Weather} {Temperature} градусов.
        Ukraine. В Kyiv Солнечно -10 градусов

        + бонус добавить красивые картинки с погодой
    */
    window.addEventListener("load", function () {
      var countries = ['Ukraine', 'Poland', 'USA'];
      var ukraineCity = ['Kyiv', 'Lviv', 'Odesa', 'Charkiv'];
      var polandCity = ['Warszawa', 'Poznan', 'Krakow', 'Katowice'];
      var usaCity = ['New York', 'Los Angeles', 'Las Vegas', 'Chicago'];
      var cold = getRandomIntInclusive(-10,0);
      var rain = getRandomIntInclusive(0,30);
      var sunny = getRandomIntInclusive(30,40);
      var Temperature = [cold, rain, sunny];
      var div = document.createElement('div');
          div.id = "selectors";
          document.body.appendChild(div);
      var block = document.getElementById('selectors');
    var resultBlock = document.getElementById('result');  
    function getRandomIntInclusive(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    var country = document.getElementById('countries');
      var startOpt = new Option("Выберите страну");
          startOpt.disabled = true;
          startOpt.selected = true;
      country.appendChild(startOpt);
      countries.forEach(function(item){
        var selected = false;
        var defSelected = false;
        var option = new Option(item, item, defSelected, selected);
        country.appendChild(option);
      })    
      function CityGen (a){
        var select = document.createElement('select');
            select.id = 'cities';
            block.appendChild(select);
        var CitySelect = document.getElementById('cities');
        var startOpt = new Option("Выберите город");
            startOpt.disabled = true;
            startOpt.selected = true;
            CitySelect.appendChild(startOpt);
        if (a == countries[0]){
          ukraineCity.forEach(function(item){
          var selected = false;
          var defSelected = false;
          var option = new Option(item, item, defSelected, selected);
          CitySelect.appendChild(option);
         })    
        }
        if (a == countries[1]){
        polandCity.forEach(function(item){
        var selected = false;
        var defSelected = false;
        var option = new Option(item, item, defSelected, selected);
        CitySelect.appendChild(option);
         })    
        }
        if (a == countries[2]){
        usaCity.forEach(function(item){
        var selected = false;
        var defSelected = false;
        var option = new Option(item, item, defSelected, selected);
        CitySelect.appendChild(option);
         })    
        }
        function Images (a){
        var img = document.createElement('img');
            resultBlock.appendChild(img);
          if (a == Temperature[0]){
            img.src = "https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/Nuvola_weather_snow.svg/419px-Nuvola_weather_snow.svg.png";
            alert(country.value + "." + "В " + CitySelect.value + " лёгкий снегопад " + Temperature[0] + " градусов");
          }
          if (a == Temperature[1]){
            img.src = "https://cdn.pixabay.com/photo/2016/03/18/15/05/rain-1265201_960_720.png";
            alert(country.value + "." + "В " + CitySelect.value + " сильный дождь " + Temperature[1] + " градусов");
          }
          if (a == Temperature[2]){
            img.src = "https://png.clipart.me/previews/3b1/free-vector-weather-with-sun-and-clouds-25908.jpg";
            alert(country.value + "." + "В " + CitySelect.value + " засуха " + Temperature[2] + " градусов");
          }
      }
        CitySelect.addEventListener('change' ,function(change){
          resultBlock.innerHTML = null;
          Images(Temperature[getRandomIntInclusive(0,2)]);
         })
        }
      country.addEventListener('change', function(change){
          block.innerHTML = null;
          resultBlock.innerHTML = null;
          CityGen(change.target.value);
        })
      
    });

  </script>
</head>
<body>
  <select id="countries"></select>
  <div id="result"></div>
</body>
</html>
